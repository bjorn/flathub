{
  "app-id": "org.manasource.Mana",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "23.08",
  "sdk": "org.freedesktop.Sdk",
  "command": "mana",
  "finish-args": [
    "--socket=fallback-x11",
    "--socket=wayland",
    "--socket=pulseaudio",
    "--share=ipc",
    "--share=network",
    "--device=dri",
    "--persist=.config/mana",
    "--persist=.local/share/mana"
  ],
  "modules": [
    "shared-modules/physfs/physfs.json",
    {
      "name": "SDL2_gfx",
      "rm-configure": true,
      "build-options": {
        "arch": {
          "aarch64": {
            "config-opts": [
              "--disable-mmx"
            ]
          }
        }
      },
      "cleanup": [
        "/include",
        "/lib/pkgconfig"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://www.ferzkopp.net/Software/SDL2_gfx/SDL2_gfx-1.0.4.zip",
          "sha256": "b6da07583b7fb8f4d8cee97cac9176b97a287f56a8112e22f38183ecf47b9dcb"
        },
        {
          "type": "script",
          "dest-filename": "autogen.sh",
          "commands": [
            "autoreconf -vfi"
          ]
        }
      ]
    },
    {
      "name": "Guichan",
      "cleanup": [
        "/include",
        "/lib/pkgconfig"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/darkbitsorg/guichan/releases/download/v0.8.2/guichan-0.8.2.tar.gz",
          "sha256": "eedf206eae5201eaae027b133226d0793ab9a287bfd74c5f82c7681e3684eeab"
        },
        {
          "type": "shell",
          "commands": [
            "cp -p /usr/share/automake-*/config.{sub,guess} ."
          ]
        }
      ]
    },
    {
      "name": "mana",
      "buildsystem": "cmake-ninja",
      "sources": [
        {
          "type": "git",
          "url": "https://git.themanaworld.org/mana/mana.git",
          "commit": "d047db79f7034e0e75a85a656d18f40716d197b9"
        }
      ]
    }
  ]
}
